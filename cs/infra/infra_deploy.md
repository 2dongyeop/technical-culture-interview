## 배포 전략: 카나리, 블루-그린, 롤링 배포 비교

> **카나리 배포 (Canary Deployment)**
>

- **개념**: 새로운 버전을 전체 사용자에게 배포하기 전에 소수의 사용자에게만 배포하여 검증하는 방식입니다. 초기 사용자에게만 배포 후, 문제가 없으면 점차적으로 배포를 확장합니다.
- **장점**:
    - **위험 최소화**: 문제가 발생했을 때 영향을 받는 사용자 수가 적어 리스크를 줄일 수 있습니다.
    - **실제 환경에서의 검증**: 새로운 버전이 실제 사용자 환경에서 잘 동작하는지 확인할 수 있습니다.
    - **점진적 롤백**: 문제가 발생하면 빠르게 롤백하거나 수정할 수 있습니다.
- **단점**:
    - **배포 과정이 복잡**: 사용자 그룹을 나누고, 트래픽을 관리하는 설정이 필요합니다.
    - **지속적인 모니터링 필요**: 문제 발생을 빠르게 감지하고 대응해야 합니다.
- **적합한 상황**:
    - 트래픽이 많은 서비스에서 점진적으로 새로운 버전을 테스트하고 배포할 때 유용합니다.
    - 새로운 기능이나 변화가 사용자의 경험에 큰 영향을 미칠 가능성이 있을 때 적합합니다.

<br/>

> **블루-그린 배포 (Blue-Green Deployment)**
>

- **개념**: 두 개의 환경(블루와 그린)을 설정하여, 하나의 환경(예: 블루)을 현재 운영 중인 버전으로 유지하고, 다른 환경(예: 그린)에 새로운 버전을 배포하여 테스트 후, 문제가 없으면 트래픽을 새 버전(
  그린)으로 전환하는 방식입니다.
- **장점**:
    - **빠른 롤백**: 문제가 발생하면 즉시 이전 버전(블루)으로 트래픽을 전환하여 롤백할 수 있습니다.
    - **완전한 테스트 환경**: 새로운 버전이 실제 운영 환경과 동일한 환경에서 테스트되므로 안전성을 확보할 수 있습니다.
    - **배포의 안정성**: 버전 간 충돌이나 호환성 문제를 미리 방지할 수 있습니다.
- **단점**:
    - **두 배의 인프라 필요**: 블루와 그린 환경을 동시에 유지해야 하므로 추가적인 서버나 리소스가 필요합니다.
    - **배포 비용 증가**: 인프라가 이중화되므로 비용이 더 들 수 있습니다.
- **적합한 상황**:
    - 대규모 서비스를 운영하면서 안정적인 배포가 필요할 때.
    - 완벽한 롤백이 중요한 경우.

<br/>

> **롤링 배포 (Rolling Deployment)**
>

- **개념**: 새로운 버전을 기존 버전과 동시에 조금씩 배포하는 방식으로, 서버나 인스턴스를 하나씩 업데이트하여 점진적으로 배포합니다. 모든 서버가 점차적으로 새로운 버전으로 업데이트됩니다.
- **장점**:
    - **무중단 배포**: 사용자는 서비스 중단 없이 배포가 진행됩니다.
    - **배포 속도 조절 가능**: 배포 속도를 조절할 수 있어 트래픽의 양에 따라 적절한 업데이트가 가능합니다.
    - **리소스 효율성**: 두 배의 리소스를 사용하지 않으므로 비용 절감이 가능합니다.
- **단점**:
    - **배포 중간에 불일치**: 배포가 진행되는 동안 구 버전과 새 버전이 혼합될 수 있어 문제가 발생할 수 있습니다.
    - **배포 시간 길어짐**: 점진적으로 배포하므로 전체 배포가 완료되기까지 시간이 오래 걸릴 수 있습니다.
- **적합한 상황**:
    - 점진적으로 배포하고자 할 때 유용하며, 리소스 절약이 중요한 경우.
    - 서비스 중단 없이 배포를 진행할 필요가 있을 때 적합합니다.

--- 

카나리와 롤링은 둘 다 점진적으로 배포하는 방식이지만,

- **카나리 배포**는 **사용자 그룹**을 기준으로 점진적으로 배포하고,

- **롤링 배포**는 **서버 인프라**를 기준으로 점진적으로 배포하는 방식입니다.