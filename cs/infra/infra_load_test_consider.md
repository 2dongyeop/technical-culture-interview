## 부하 테스트 및 TPS 분석 시 고려사항

<br/>

> **테스트 목표 정의**
>

- **목표 식별**:
    - 부하 테스트의 목표는 무엇인지 명확히 해야 합니다.
    - 예를 들어, 성능 측정, 용량 테스트, 장애 복구 테스트 등 목적에 맞는 테스트를 설정해야 합니다.
- **성능 기준**:
    - 시스템이 처리할 수 있는 TPS의 목표를 설정하거나, 시스템이 잘 동작하는 최대 성능을 정의

<br/>

> **테스트 환경 준비**
>

- **테스트 환경의 정확성**:
    - 실제 운영 환경과 유사한 환경을 준비해야 합니다.
    - 테스트 환경이 실제와 다르면 테스트 결과가 정확하지 않을 수 있습니다.
- **하드웨어/소프트웨어 사양**:
    - 테스트 환경에서 사용될 서버, 네트워크, 데이터베이스, 로드 밸런서 등의 자원 사양을 정확하게 파악하고 반영해야 합니다.
- **분산 부하 테스트**:
    - 테스트 툴을 활용하여 여러 대의 머신에서 테스트를 분산하여 수행할 수 있습니다.

<br/>

> **부하 수준과 시나리오 설계**
>

- **부하 수준**:
    - 부하 테스트는 점진적으로 부하를 증가시켜 시스템의 한계를 찾습니다.
    - 시작은 적은 부하에서 시작하고 점차 부하를 증가시키면서 시스템의 반응을 분석해야 합니다.
- **시나리오 설계**:
    - 사용자의 실제 행동을 반영한 다양한 시나리오를 설계해야 합니다.
    - 예를 들어, 로그인 후 상품 검색, 결제 등 다양한 기능에 대해 테스트를 진행합니다.

<br/>

> **TPS 분석**
>

- **TPS 수집**:
    - 시스템이 초당 처리할 수 있는 트랜잭션 수(TPS)를 수집하여 시스템의 성능을 측정합니다.
    - TPS는 특정 시간대에 시스템이 얼마나 많은 트랜잭션을 처리할 수 있는지 보여줍니다.
- **최대 TPS 및 안정성**:
    - 시스템이 처리할 수 있는 최대 TPS를 구하고, 그 시점에서의 시스템 안정성(응답 시간, 오류율 등)을 확인해야 합니다.

<br/>

> **응답 시간 및 지연 시간 측정**
>

- **응답 시간**:
    - 각 요청에 대한 서버의 응답 시간을 측정하여, 시스템이 높은 부하에서도 요구 사항을 충족할 수 있는지 확인합니다.
- **지연 시간**:
    - 부하가 증가할 때 응답 시간이 어떻게 변하는지 분석하여 병목 현상을 파악합니다.

<br/>

> **시스템 모니터링**
>

- **리소스 사용 모니터링**:
    - CPU, 메모리, 디스크 I/O, 네트워크 대역폭 등의 리소스를 모니터링하여, 시스템 리소스가 부족해지는 시점을 찾고 성능 저하를 방지합니다.
- **애플리케이션 로그**:
    - 애플리케이션 로그를 통해 발생하는 오류나 예외를 분석하고 성능 저하의 원인을 파악합니다.
- **DB 성능**:
    - DB 쿼리 성능, 인덱스 사용 여부, DB 커넥션 풀 등의 성능을 분석합니다.

<br/>

> **결과 분석 및 병목 분석**
>

- **병목 분석**:
    - 테스트 결과에서 성능이 저하되는 지점(예: DB, 애플리케이션, 네트워크 등)을 찾아내고 해당 부분의 병목을 해결합니다.
- **스케일링 분석**:
    - 트래픽 증가에 따라 시스템을 어떻게 확장할 수 있을지(수평/수직 스케일링)에 대한 계획을 수립합니다.

<br/>

> **테스트 반복**
>

- **반복 테스트**:
    - 성능 최적화 후 부하 테스트를 반복하여 시스템이 개선된 성능을 계속 유지하는지 확인합니다.

<br/>

> **성능 최적화**
>

- **애플리케이션 및 DB 최적화**:
    - 성능 저하가 발생하는 부분을 최적화하여 성능을 개선합니다.
- **캐싱 및 데이터 압축**:
    - 필요에 따라 캐시나 데이터 압축 기술을 도입하여 부하를 줄입니다.

<br/>

> **상용화 전 마지막 검증**
>

- **실제 부하와 유사한 환경 테스트**: 마지막으로 실제 운영 환경에서 예상되는 부하를 반영한 테스트를 진행하여 시스템을 검증합니다.