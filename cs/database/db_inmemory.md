## 인메모리 DB가 더 빠른 이유

<br/>

> **인메모리 DB란?**
>

- 인메모리 데이터베이스는 **디스크 대신 RAM(메모리)에 데이터를 저장하는 DB**입니다.
- 대표적인 예시: **Redis, Memcached, H2, Apache Ignite**

<br/>

> **인메모리 DB가 빠른 이유**
>

1. **디스크 I/O가 없음 → 접근 속도가 빠름**
    - **일반적인 RDBMS (MySQL, PostgreSQL)의 속도가 느린 이유?**
        - 데이터를 조회할 때 **디스크에서 블록을 읽고, 페이지 캐시에 로드하는 과정이 필요**
        - HDD(100ms) ≫ SSD(0.1ms) ≫ **RAM(10~100ns)** → 메모리는 SSD보다 **1,000배 빠름**
    - **인메모리 DB의 장점:**
        - 모든 데이터가 RAM에 있기 때문에 **디스크에서 읽는 과정이 필요 없음**
        - `O(1)` 연산 (해시 테이블, 트라이 구조)으로 초고속 조회 가능

<br/>

2. **동시성 제어 최적화 (Lock-Free, Multi-Threaded)**
    - **일반 RDBMS의 단점**
        - 다중 사용자 요청을 처리하기 위해 **락(Lock), MVCC 사용 → 컨텍스트 스위칭 비용 발생**
        - SELECT/UPDATE 충돌 시 **락 대기 발생 → 성능 저하**
    - **인메모리 DB의 장점**
        - 대부분의 인메모리 DB는 **락을 최소화하거나 아예 사용하지 않음 (Lock-Free 구조)**
        - Redis는 **Single Threaded** 이지만, **I/O 멀티플렉싱(비동기 이벤트 처리)** 덕분에 빠름
        - Memcached는 **멀티스레드 기반으로 동시 처리 최적화**

<br/>

> **인메모리 DB의 한계**
>

1. **데이터 영속성 부족**
    - 기본적으로 RAM 기반이라 **서버 재시작 시 데이터 유실 가능**
    - 해결 방법:
        - **Redis AOF (Append-Only File)**: 로그 기반 영속성 보장
        - **Snapshot (RDB 방식)**: 특정 주기마다 데이터 덤프
2. **메모리 용량 제한**
    - RAM이 부족하면 **데이터를 삭제하거나 외부 저장소(RDB, 디스크)로 이동해야 함**
    - 대량 데이터를 처리할 때 **디스크 기반 DB와 함께 사용해야 함**
3. **고가용성 문제**
    - **RDBMS는 기본적으로 높은 내구성을 제공하지만, 인메모리 DB는 장애 복구가 필요**
    - 해결 방법:
        - Redis **Sentinel, Cluster 모드** 활용하여 장애 복구
        - Amazon ElastiCache처럼 **Managed 서비스** 활용